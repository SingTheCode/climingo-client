---
inclusion: never
---

# 아키텍처 규칙 생성 프롬프트

이 프롬프트를 사용하면 신규 프로젝트의 기술 스택에 맞게 아키텍처 문서 3개를 자동 생성할 수 있습니다.

---

## 프롬프트

```
다음 기술 스택을 기반으로 프로젝트 아키텍처 규칙 문서 3개를 생성해주세요:

**기술 스택**: [프레임워크], [상태관리], [스타일링], [기타 라이브러리]

---

**생성할 파일**:

1. **architecture.md** (500줄 이내)
2. **architecture-rules.md** (500줄 이내)
3. **architecture-domain-isolation.md** (500줄 이내)

---

**architecture.md 구조**:

```markdown
# [프로젝트명] Frontend Architecture Guide

> **기술 스택**: [제시된 기술 스택]

## 1. 핵심 원칙 (Core Principles)
### 1.1 상태(Logic)와 뷰(UI)의 철저한 분리
### 1.2 도메인 주도 디렉토리 구조
### 1.3 선언적 비동기 처리
### 1.4 단일 책임 원칙

## 2. 표준 디렉토리 구조 (Directory Structure)
- 제시된 기술 스택에 맞는 디렉토리 구조
- Controller, Domain, Shared 레이어 설명

## 3. 세부 규칙 (Detailed Rules)
- Rule 1-7 요약 및 architecture-rules.md 링크
- 도메인 격리 개요 및 architecture-domain-isolation.md 링크

## 4. 안티 패턴 (Anti-Patterns) 🚫
### ❌ Anti-Pattern 1: Headless Hook에서 UI 반환
### ❌ Anti-Pattern 2: Compound Component에서 비즈니스 로직
### ❌ Anti-Pattern 3: 단계 컴포넌트에서 다음 단계 이동
### ❌ Anti-Pattern 4: Controller에서 Api 직접 호출
### ❌ Anti-Pattern 5: 도메인 전용 Hook을 공통 폴더에 배치
### ❌ Anti-Pattern 6: Prop Drilling (5단계 이상)
### ❌ Anti-Pattern 7: UI 컴포넌트에서 직접 fetch
### ❌ Anti-Pattern 8: 컴포넌트 내부에서 로딩/에러 분기
### ❌ Anti-Pattern 9: Context로 도메인 간 데이터 공유
### ❌ Anti-Pattern 10: Props Drilling 회피를 위한 무분별한 Context 사용

각 안티 패턴마다 금지된 코드와 해결 방법 예시 포함

## 5. 코드 리뷰 기준
### 5.1 Headless Hook
### 5.2 Compound Component
### 5.3 Funnel 패턴
### 5.4 비동기 처리
### 5.5 레이어 간 의존성
### 5.6 네이밍 규칙

각 항목마다 체크리스트 형식으로 작성

## 6. 기술 스택별 가이드
- 제시된 각 기술 스택별 권장 사용법
- 프레임워크 특화 기능 설명
- 상태관리 라이브러리 패턴
- 스타일링 Best Practice

## 7. 참고 자료
- 관련 공식 문서 링크
- 아키텍처 패턴 참고 자료
```

---

**architecture-rules.md 구조**:

```markdown
# 아키텍처 세부 규칙 (Architecture Rules)

## Rule 1. Headless Hook의 책임
**정의**: UI와 완전히 분리된 로직과 상태 관리 Hook
**허용**: [항목 나열]
**금지**: [항목 나열]
**위치**: [파일 위치]
**예시**: [제시된 기술 스택으로 작성된 코드 예시]

## Rule 2. Compound Component의 책임
**정의**: Context API를 활용해 상태를 공유하는 조립 가능한 컴포넌트
**구조**: Root Component, 하위 컴포넌트
**허용**: [항목 나열]
**금지**: [항목 나열]
**위치**: [파일 위치]
**예시**: [제시된 기술 스택으로 작성된 코드 예시]

## Rule 3. Funnel 패턴의 책임
**정의**: 다단계 플로우를 상위 Controller에서 선언적으로 관리
**허용**: [항목 나열]
**금지**: [항목 나열]
**위치**: [파일 위치]
**예시**: [제시된 기술 스택으로 작성된 코드 예시]

## Rule 4. Api의 책임
**정의**: API 통신만 담당
**허용**: [항목 나열]
**금지**: [항목 나열]
**위치**: [파일 위치]
**예시**: [제시된 기술 스택으로 작성된 코드 예시]
- Transform 함수 예시 포함

## Rule 5. 레이어 간 의존성
**허용되는 의존성**: [항목 나열]
**금지되는 의존성**: [항목 나열]
**의존성 흐름**: [다이어그램]

## Rule 6. 선언적 비동기 처리
**정의**: Suspense와 ErrorBoundary를 조합한 선언적 관리
**허용**: [항목 나열]
**금지**: [항목 나열]
**예시**: [제시된 기술 스택으로 작성된 코드 예시]

## Rule 7. 파일 네이밍 및 위치
**Headless Hook**: 네이밍, 위치
**Compound Component**: 네이밍, 위치
**Api**: 네이밍, 위치
**API Hook**: 네이밍, 위치
**Import 경로 규칙**: 절대경로 사용
**ESLint 규칙**: 예시 포함
**Controller (Page)**: 위치, 네이밍
```

---

**architecture-domain-isolation.md 구조**:

```markdown
# 도메인 격리 규칙 (Domain Isolation)

## 1. 3단계 의사결정 트리
도메인 간 데이터가 필요할 때 판단 순서:
- 1단계: 구조 재설계 검토
- 2단계: 서버 상태 공유
- 3단계: Page 레벨 조립

## 2. 허용/금지 사항
**허용**: [항목 나열]
**금지**: [항목 나열]

## 3. 실전 패턴
### 패턴 1: 식별자만 전달 (가장 권장)
[제시된 기술 스택으로 작성된 코드 예시]

### 패턴 2: 서버 상태 공유 (React Query 또는 해당 상태관리)
[제시된 기술 스택으로 작성된 코드 예시]

### 패턴 3: Page 레벨 조립
[제시된 기술 스택으로 작성된 코드 예시]

## 4. Props Drilling 판단 기준
| Props 깊이 | 판단 | 조치 |
[테이블 형식으로 작성]

코드 예시 포함

## 5. Context API 사용 기준
**Context 사용이 적절한 경우**: [항목 나열]
**Context 사용이 부적절한 경우**: [항목 나열]
[제시된 기술 스택으로 작성된 코드 예시]

## 6. 도메인 간 의존성 해결
**원칙**: 포괄 도메인 생성
**시나리오**: auth와 profile이 서로 의존하는 경우
**해결**: [디렉토리 구조 및 코드 예시]

## 7. 금지된 패턴
[제시된 기술 스택으로 작성된 금지 코드 예시]

## 8. 체크리스트
[구현 시 확인할 항목들]
```

---

**필수 규칙**:

1. **파일 크기**: 각 파일은 500줄을 넘지 않아야 함
2. **파일 분리**: 500줄 초과 시 연관 내용끼리 묶어 별도 파일로 추출
3. **기술 스택 반영**: 모든 예시 코드는 제시된 기술 스택 사용
4. **패턴 포함**: Headless Hook, Compound Component, Funnel 패턴 필수
5. **디렉토리 구조**: 도메인 주도 디렉토리 구조 적용
6. **비동기 처리**: 제시된 기술 스택의 비동기 처리 패턴 적용
7. **한글 작성**: 모든 설명은 한글로 작성 (코드 주석 포함)
8. **실전 코드**: 실제 프로젝트에서 바로 사용 가능한 수준의 코드

---

**예시 코드 작성 규칙**:

- 제시된 프레임워크의 최신 문법 사용
- 상태관리 라이브러리의 권장 패턴 적용
- 스타일링 라이브러리의 Best Practice 반영
- TypeScript 타입 정의 포함
- 각 Rule마다 ✅ 올바른 예시와 ❌ 금지된 예시 모두 포함
- 주석은 한글로 작성
- 실제 도메인 예시 사용 (auth, record, profile, place 등)

---

**출력 형식**:

각 파일을 다음 형식으로 생성:

\`\`\`markdown
---
inclusion: always
---

# [파일 제목]

> **기술 스택**: [제시된 기술 스택]

[내용...]

---

**마지막 업데이트**: [날짜]
**버전**: 1.0.0
\`\`\`
```

---

## 사용 예시

```
다음 기술 스택을 기반으로 프로젝트 아키텍처 규칙 문서 3개를 생성해주세요:

**기술 스택**: Vue 3, Pinia, TypeScript, Vite, Tailwind CSS, VueUse

[위 프롬프트 내용 전체 복사...]
```
