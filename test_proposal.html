<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>테스트 코드 도입 제안서</title>
    <style>
        body {
            font-family: 'Malgun Gothic', 'Apple SD Gothic Neo', sans-serif;
            line-height: 1.6;
            margin: 0;
            padding: 40px;
            color: #333;
            background: #fff;
        }
        
        .container {
            max-width: 800px;
            margin: 0 auto;
        }
        
        h1 {
            color: #2563eb;
            font-size: 2.5em;
            margin-bottom: 0.5em;
            text-align: center;
            border-bottom: 3px solid #2563eb;
            padding-bottom: 0.5em;
        }
        
        h2 {
            color: #1e40af;
            font-size: 1.8em;
            margin-top: 2em;
            margin-bottom: 1em;
            border-left: 5px solid #3b82f6;
            padding-left: 1em;
        }
        
        h3 {
            color: #1d4ed8;
            font-size: 1.4em;
            margin-top: 1.5em;
            margin-bottom: 0.8em;
        }
        
        h4 {
            color: #1e3a8a;
            font-size: 1.2em;
            margin-top: 1.2em;
            margin-bottom: 0.6em;
        }
        
        .toc {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
            margin: 30px 0;
        }
        
        .toc h2 {
            margin-top: 0;
            color: #475569;
        }
        
        .toc ol {
            padding-left: 20px;
        }
        
        .toc li {
            margin: 8px 0;
        }
        
        .highlight-box {
            background: #dbeafe;
            border-left: 4px solid #3b82f6;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .warning-box {
            background: #fef3c7;
            border-left: 4px solid #f59e0b;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
        
        .success-box {
            background: #d1fae5;
            border-left: 4px solid #10b981;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
        }
        
        code {
            background: #f1f5f9;
            padding: 2px 6px;
            border-radius: 4px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
        }
        
        pre {
            background: #1e293b;
            color: #e2e8f0;
            padding: 20px;
            border-radius: 8px;
            overflow-x: auto;
            font-family: 'Consolas', 'Monaco', monospace;
            line-height: 1.4;
        }
        
        pre code {
            background: none;
            padding: 0;
            color: inherit;
        }
        
        ul, ol {
            padding-left: 30px;
        }
        
        li {
            margin: 8px 0;
        }
        
        .pyramid {
            text-align: center;
            font-family: monospace;
            background: #f8fafc;
            padding: 20px;
            border-radius: 8px;
            margin: 20px 0;
            line-height: 2;
        }
        
        .roadmap {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .phase {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
        }
        
        .phase h4 {
            margin-top: 0;
            color: #1e40af;
        }
        
        .phase ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        
        .quote {
            font-style: italic;
            font-size: 1.2em;
            text-align: center;
            color: #475569;
            margin: 40px 0;
            padding: 20px;
            background: #f1f5f9;
            border-radius: 8px;
        }
        
        .benefits {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 20px 0;
        }
        
        .benefit-card {
            background: #f8fafc;
            border: 1px solid #e2e8f0;
            border-radius: 8px;
            padding: 20px;
        }
        
        .benefit-card h4 {
            margin-top: 0;
            color: #1e40af;
        }
        
        @media print {
            body {
                padding: 20px;
            }
            
            .container {
                max-width: 100%;
            }
            
            h1 {
                page-break-after: avoid;
            }
            
            h2, h3, h4 {
                page-break-after: avoid;
            }
            
            .highlight-box, .warning-box, .success-box {
                page-break-inside: avoid;
            }
            
            pre {
                page-break-inside: avoid;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>🧪 프로젝트 테스트 도입 제안서</h1>
        
        <div class="toc">
            <h2>📋 목차</h2>
            <ol>
                <li>테스트 도입 목적</li>
                <li>테스트 구조와 전략</li>
                <li>TDD 워크플로우의 중요성</li>
                <li>그라운드 룰 제안</li>
                <li>Cursor AI 활용 팁</li>
                <li>실제 구현 예제</li>
                <li>기대 효과</li>
                <li>도입 로드맵</li>
            </ol>
        </div>

        <h2>🎯 테스트 도입 목적</h2>
        
        <h3>1. 요구사항 명세서 역할</h3>
        <ul>
            <li><strong>살아있는 문서</strong>: 테스트 코드는 기능의 동작 방식을 명확하게 설명하는 실행 가능한 문서</li>
            <li><strong>비즈니스 로직 보장</strong>: 복잡한 비즈니스 규칙을 코드로 명세화하여 의도한 대로 동작함을 보장</li>
            <li><strong>API 계약 명세</strong>: 컴포넌트 간 인터페이스와 예상 동작을 명확히 정의</li>
        </ul>
        
        <h3>2. 안전한 리팩토링과 요구사항 변경 지원</h3>
        <ul>
            <li><strong>변경 사항 영향도 파악</strong>: 코드 수정 시 기존 기능에 미치는 영향을 즉시 확인</li>
            <li><strong>회귀(Regression) 방지</strong>: 새로운 기능 추가나 버그 수정 시 기존 기능 손상 방지</li>
            <li><strong>자신감 있는 리팩토링</strong>: 테스트가 보장하는 안전망 하에서 코드 품질 개선</li>
        </ul>

        <h2>🏗️ 테스트 구조와 전략</h2>
        
        <h3>테스트 피라미드 구조</h3>
        <div class="pyramid">
            🔺 E2E 테스트<br>
            (핵심 시나리오만)<br><br>
            
            🔶 통합 테스트 (Jest)<br>
            (컴포넌트 + API 연동)<br><br>
            
            🔷 단위 테스트 (Jest)<br>
            (함수, 훅, 스토어)
        </div>

        <h3>디렉토리 구조</h3>
        <pre><code>test/
├── unit/          # 단위 테스트 (hooks, stores, utils)
├── integration/   # 통합 테스트 (components, views)
├── e2e/          # E2E 테스트 (핵심 사용자 시나리오)
└── mocks/        # 초기 환경 모킹</code></pre>

        <h3>테스트 작성 원칙</h3>
        <ul>
            <li><strong>단위/통합 테스트</strong>: TDD로 작성하여 설계 품질 향상</li>
            <li><strong>E2E 테스트</strong>: 핵심 비즈니스 시나리오만 선별적으로 작성</li>
            <li><strong>한글 BDD</strong>: 비개발자도 이해할 수 있는 명확한 테스트 명세</li>
        </ul>

        <h2>⚡ TDD 워크플로우의 중요성</h2>
        
        <div class="highlight-box">
            <h3>LLM 시대의 TDD 필요성</h3>
            <p><strong>"TDD는 LLM에게 높은 자유도를 주었을 때 안전하고 생산적으로 활용하기 위한 가장 효과적인 워크플로우"</strong></p>
        </div>

        <h4>1. 안전망 제공</h4>
        <ul>
            <li>AI가 생성한 코드의 정확성을 즉시 검증</li>
            <li>예상치 못한 부작용이나 회귀 버그 방지</li>
            <li>복잡한 로직에서도 요구사항 충족 보장</li>
        </ul>

        <h4>2. 명확한 요구사항 전달</h4>
        <ul>
            <li>테스트를 통해 AI에게 정확한 의도 전달</li>
            <li>모호함을 제거하고 구체적인 동작 명세</li>
            <li>예외 상황과 엣지 케이스까지 포함한 완전한 요구사항</li>
        </ul>

        <h4>3. 반복적 개선</h4>
        <ul>
            <li>Red → Green → Refactor 사이클로 점진적 품질 향상</li>
            <li>AI의 빠른 코드 생성 + 테스트의 안전성 = 최적의 개발 속도</li>
        </ul>

        <h2>📏 그라운드 룰 제안</h2>
        
        <div class="warning-box">
            <h3>필수 규칙</h3>
            <ol>
                <li><strong>PR 생성 전 테스트 실행 필수</strong>
                    <pre><code>npm test  # 모든 테스트 통과 확인</code></pre>
                </li>
                <li><strong>요구사항 변경 시 테스트 코드 수정 필수</strong>
                    <ul>
                        <li>비즈니스 로직 변경 → 테스트 업데이트 → 구현 코드 수정 (권장)</li>
                        <li>새로운 기능 추가 → 테스트 작성 → TDD로 구현 (권장)</li>
                    </ul>
                </li>
            </ol>
        </div>

        <h3>권장 사항</h3>
        <ul>
            <li>복잡한 로직일수록 테스트를 더 세밀하게 작성</li>
            <li>사용자 인터랙션이 많은 컴포넌트는 통합 테스트 우선</li>
            <li>API 연동 로직은 모킹을 통한 격리 테스트</li>
        </ul>

        <h2>🤖 Cursor AI 활용 팁</h2>
        
        <h3>1. Cursor Rules에 TDD 워크플로우 추가</h3>
        <pre><code># .cursorrules 파일에 추가

## TDD 워크플로우 강제
- 모든 코드 변경은 TDD 사이클을 따름
- 테스트 실패 → 구현 → 테스트 통과 → 리팩토링
- 구현 전 반드시 사용자 승인 필요

## 테스트 우선 원칙
- 새로운 기능 요청 시 테스트 계획 먼저 제시
- 테스트 코드 작성 후 구현 코드 작성
- 모든 테스트 통과 확인 후 다음 단계 진행</code></pre>

        <h3>2. Playwright MCP 활용</h3>
        <ul>
            <li><strong>시각적 테스트 작성</strong>: 브라우저에서 직접 요소 확인 후 테스트 코드 생성</li>
            <li><strong>사용자 시나리오 기록</strong>: 실제 사용자 행동을 기록하여 E2E 테스트 자동 생성</li>
            <li><strong>실시간 디버깅</strong>: 테스트 실행 중 브라우저 상태 실시간 확인</li>
        </ul>

        <h2>📄 실제 구현 예제</h2>
        
        <h3>NewMemberBanner 컴포넌트 테스트 핵심 구조</h3>
        
        <pre><code>describe('신규 회원 배너(NewMemberBanner)', () => {
    // 1. 테스트 환경 설정
    const renderNewMemberBanner = () => {
        return renderComponent(NewMemberBanner, {
            global: { provide: { /* mock 설정 */ } }
        });
    };

    // 2. 시나리오별 그룹화
    describe('데이터가 성공적으로 로드되었을 때', () => {
        test('마운트 시 배너 데이터를 가져와서 개수만큼 렌더링한다', async () => {
            // Arrange - Given
            // Act - When  
            // Assert - Then
        });
    });

    describe('데이터 로드 실패 시', () => {
        test('API 응답의 data가 null이면 배너가 렌더링되지 않는다', async () => {
            // 에러 케이스 검증
        });
    });

    describe('쿠키에 따른 배너 노출 제어', () => {
        test('쿠키가 "hide"로 존재하고 유효할 때 배너가 숨겨진다', async () => {
            // 엣지 케이스 검증
        });
    });
});</code></pre>

        <div class="success-box">
            <h4>이 예제의 핵심 가치</h4>
            <ol>
                <li><strong>명확한 요구사항 명세</strong> - 배너 렌더링 조건, 클릭 동작, 쿠키 제어 로직</li>
                <li><strong>포괄적인 시나리오 커버</strong> - 정상/에러/엣지 케이스 모두 포함</li>
                <li><strong>접근성 검증</strong> - aria 속성 등 웹 표준 준수 확인</li>
            </ol>
        </div>

        <h2>📈 기대 효과</h2>
        
        <div class="benefits">
            <div class="benefit-card">
                <h4>단기 효과</h4>
                <ul>
                    <li>버그 조기 발견</li>
                    <li>코드 품질 향상</li>
                    <li>개발자 신뢰도 증가</li>
                </ul>
            </div>
            
            <div class="benefit-card">
                <h4>중장기 효과</h4>
                <ul>
                    <li>유지보수 비용 절감</li>
                    <li>신규 개발자 온보딩</li>
                    <li>리팩토링 가속화</li>
                </ul>
            </div>
            
            <div class="benefit-card">
                <h4>비즈니스 가치</h4>
                <ul>
                    <li>배포 신뢰도 향상</li>
                    <li>기능 출시 속도 증가</li>
                    <li>고객 만족도 향상</li>
                </ul>
            </div>
        </div>

        <h2>🚀 도입 로드맵</h2>
        
        <div class="roadmap">
            <div class="phase">
                <h4>Phase 1: 기반 구축</h4>
                <ul>
                    <li>테스트 환경 설정</li>
                    <li>TDD 워크플로우 가이드 작성</li>
                </ul>
            </div>
            
            <div class="phase">
                <h4>Phase 2: 확산</h4>
                <ul>
                    <li>신규 기능 TDD 적용</li>
                    <li>기존 코드 점진적 테스트 추가</li>
                </ul>
            </div>
            
            <div class="phase">
                <h4>Phase 3: 정착</h4>
                <ul>
                    <li>테스트 커버리지 모니터링</li>
                    <li>자동화된 테스트 실행 환경</li>
                    <li>지속적인 개선 및 최적화</li>
                </ul>
            </div>
        </div>

        <div class="quote">
            "테스트는 비용이 아닌 투자입니다.<br>
            안정적이고 지속 가능한 개발을 위한 필수 인프라입니다."
        </div>
    </div>
</body>
</html>